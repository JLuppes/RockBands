{% extends "base.html" %} {% block content %}
<h2>Bands</h2>

{% for band in bands %}
<section>
  <h3>
    {{ band.BandName }} ({{ band.FormedYear }}) {#
    <a href="{{url_for('edit_band', id=band.BandID)}}">Edit</a>
    <a href="{{url_for('delete_band', id=band.BandID)}}">Delete</a> #}
  </h3>
  <p><strong>Home:</strong> {{ band.HomeLocation }}</p>

  <h4>Members</h4>
  <ul>
    {% for m in band.memberships %}
    <li>
      {{ m.member.MemberName }} – {{ m.Role or m.member.MainPosition }} 
      {% if m.StartYear %} ({{ m.StartYear }}
      {% if m.EndYear %} – {{ m.EndYear }} {% else %} – present{% endif %})
      {% endif %} &nbsp;
      <a href="{{ url_for('edit_membership', id=m.MembershipID) }}">Edit</a> |
      <a href="{{ url_for('delete_membership', id=m.MembershipID) }}">Delete</a>
    </li>
    {% else %}
    <li><em>No members assigned yet</em></li>
    {% endfor %}
  </ul>

  <h4>Albums</h4>
  <ul>
    {% for c in band.collaborations %}
    <li>
      {{ c.album.AlbumTitle }} – Release Year: {{ c.album.ReleaseYear }},
      Collab Year: {{ c.CollabYear }} &nbsp;
      <a href="{{ url_for('edit_collaborations', id=c.CollaborationsID) }}">Edit</a> |
      <a href="{{ url_for('delete_collaborations', id=c.CollaborationsID) }}">Delete</a>
    </li>
    {% else %}
    <li><em>No Collaborations assigned yet</em></li>
    {% endfor %}
  </ul>
</section>
<hr />
{% endfor %} 
{% endblock %}
