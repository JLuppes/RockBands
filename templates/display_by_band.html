{% extends "base.html" %}

{% block content %}
<h2>Bands</h2>

{% for band in bands %}
<section>
  <h3>
    {{ band.BandName }} ({{ band.FormedYear }})
    {# Uncomment the lines below if you want edit/delete links for bands #}
    {# 
    <a href="{{ url_for('edit_band', id=band.BandID) }}">Edit</a>
    <a href="{{ url_for('delete_band', id=band.BandID) }}">Del</a>
    #}
  </h3>

  <p><strong>Home:</strong> {{ band.HomeLocation }}</p>

  <h4>Members</h4>
  <ul>
    {% for membership in band.memberships %}
      <li>
        {{ membership.member.MemberName }} – {{ membership.Role or membership.member.MainPosition }}
        {% if membership.StartYear %}
          ({{ membership.StartYear }}{% if membership.EndYear %} – {{ membership.EndYear }}{% else %} – present{% endif %})
        {% endif %}
        &nbsp;
        <a href="{{ url_for('edit_membership', id=membership.MembershipID) }}">Edit</a> |
        <a href="{{ url_for('delete_membership', id=membership.MembershipID) }}">Delete</a>
      </li>
    {% else %}
      <li><em>No members assigned yet</em></li>
    {% endfor %}
  </ul>

  <h4>Albums</h4>
  <ul>
    {% for album in band.albums %}
      <li>{{ album.AlbumTitle }} ({{ album.ReleaseYear }})</li>
    {% endfor %}
  </ul>
</section>
<hr />
{% endfor %}

{% endblock %}
