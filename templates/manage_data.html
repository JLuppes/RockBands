{% extends "base.html" %}
{% block content %}

<h1>Master Data Management</h1>
<p><em>Quick overview and edit/delete access for all data.</em></p>
<hr>


<section>
  <h2>Bands</h2>
  <a href="{{ url_for('add_band') }}">+ Add Band</a>
  <table border="1" cellpadding="5">
    <tr><th>ID</th><th>Name</th><th>Formed</th><th>Home</th><th>Actions</th></tr>
    {% for b in bands %}
      <tr>
        <td>{{ b.BandID }}</td>
        <td>{{ b.BandName }}</td>
        <td>{{ b.FormedYear }}</td>
        <td>{{ b.HomeLocation }}</td>
        <td>
          <a href="{{ url_for('view_band', id=b.BandID) }}">View</a> |
          <a href="{{ url_for('edit_membership', id=b.BandID) }}">Edit</a>
        </td>
      </tr>
    {% endfor %}
  </table>
</section>

<hr>


<section>
  <h2>Members</h2>
  <a href="{{ url_for('add_member') }}">+ Add Member</a>
  <table border="1" cellpadding="5">
    <tr><th>ID</th><th>Name</th><th>Position</th></tr>
    {% for m in members %}
      <tr>
        <td>{{ m.MemberID }}</td>
        <td><a href="{{ url_for('view_member', id=m.MemberID) }}">{{ m.MemberName }}</a></td>
        <td>{{ m.MainPosition }}</td>
      </tr>
    {% endfor %}
  </table>
</section>

<hr>


<section>
  <h2>Albums</h2>
  <a href="{{ url_for('add_album') }}">+ Add Album</a>
  <table border="1" cellpadding="5">
    <tr><th>ID</th><th>Title</th><th>Release Year</th><th>Bands</th></tr>
    {% for a in albums %}
      <tr>
        <td>{{ a.AlbumID }}</td>
        <td><a href="{{ url_for('view_album', id=a.AlbumID) }}">{{ a.AlbumTitle }}</a></td>
        <td>{{ a.ReleaseYear }}</td>
        <td>
          {% for b in a.bands %}
            {{ b.BandName }}{% if not loop.last %}, {% endif %}
          {% endfor %}
        </td>
      </tr>
    {% endfor %}
  </table>
</section>

<hr>


<section>
  <h2>Songs</h2>
  <a href="{{ url_for('add_song') }}">+ Add Song</a>
  <table border="1" cellpadding="5">
    <tr><th>ID</th><th>Title</th><th>Band</th><th>Album</th><th>Year</th></tr>
    {% for s in songs %}
      <tr>
        <td>{{ s.SongID }}</td>
        <td><a href="{{ url_for('view_song', id=s.SongID) }}">{{ s.Song_title }}</a></td>
        <td>{{ s.band.BandName }}</td>
        <td>{{ s.album.AlbumTitle }}</td>
        <td>{{ s.SongReleaseYear }}</td>
      </tr>
    {% endfor %}
  </table>
</section>

<hr>


<section>
  <h2>Memberships</h2>
  <a href="{{ url_for('add_membership') }}">+ Add Membership</a>
  <table border="1" cellpadding="5">
    <tr><th>ID</th><th>Band</th><th>Member</th><th>Role</th><th>Start</th><th>End</th><th>Actions</th></tr>
    {% for m in memberships %}
      <tr>
        <td>{{ m.MembershipID }}</td>
        <td>{{ m.band.BandName }}</td>
        <td>{{ m.member.MemberName }}</td>
        <td>{{ m.Role }}</td>
        <td>{{ m.StartYear }}</td>
        <td>{{ m.EndYear }}</td>
        <td>
          <a href="{{ url_for('edit_membership', id=m.MembershipID) }}">Edit</a> |
          <a href="{{ url_for('delete_membership', id=m.MembershipID) }}">Delete</a>
        </td>
      </tr>
    {% endfor %}
  </table>
</section>

<hr>


<section>
  <h2>Song Members</h2>
  <a href="{{ url_for('add_songmember') }}">+ Add Song Member</a>
  <table border="1" cellpadding="5">
    <tr><th>ID</th><th>Song</th><th>Member</th><th>Role</th></tr>
    {% for sm in song_members %}
      <tr>
        <td>{{ sm.SongMemberID }}</td>
        <td>{{ sm.song.Song_title }}</td>
        <td>{{ sm.member.MemberName }}</td>
        <td>{{ sm.Role }}</td>
      </tr>
    {% endfor %}
  </table>
</section>

{% endblock %}
